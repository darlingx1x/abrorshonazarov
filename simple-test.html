<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Help Button Test</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div style="padding: 20px;">
        <h1>Simple Help Button Test</h1>
        
        <!-- Copy the exact help button from index.html -->
        <button id="help-button" class="help-button" type="button" 
                aria-label="Открыть справку по Markdown" title="Справка">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
        </button>
        
        <!-- Copy the exact modal from index.html -->
        <div id="help-modal" class="modal" role="dialog" aria-modal="true" 
             aria-labelledby="help-modal-title" aria-hidden="true">
            <div class="modal-overlay" aria-hidden="true"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="help-modal-title" class="modal-title">Справка по Markdown</h2>
                    <button id="help-close" class="modal-close" type="button" 
                            aria-label="Закрыть справку" title="Закрыть (Esc)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"></line>
                            <line x1="6" y1="6" x2="18" y2="18"></line>
                        </svg>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="help-content">
                        <div class="help-section">
                            <h3>Test Modal</h3>
                            <div class="help-example">
                                <code>This is a test modal</code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div style="margin-top: 20px;">
            <button onclick="testDirectClick()">Test Direct Click</button>
            <button onclick="testModalShow()">Test Modal Show</button>
            <button onclick="testModalHide()">Test Modal Hide</button>
        </div>
        
        <div id="log" style="background: #f0f0f0; padding: 10px; margin-top: 20px; font-family: monospace; white-space: pre-wrap;"></div>
    </div>
    
    <script>
        const log = document.getElementById('log');
        
        function logMessage(message) {
            const timestamp = new Date().toLocaleTimeString();
            log.textContent += `[${timestamp}] ${message}\n`;
            console.log(message);
        }
        
        function testDirectClick() {
            logMessage('=== Testing Direct Click ===');
            const helpButton = document.getElementById('help-button');
            logMessage('Help button found: ' + !!helpButton);
            if (helpButton) {
                logMessage('Triggering click event...');
                helpButton.click();
            }
        }
        
        function testModalShow() {
            logMessage('=== Testing Modal Show ===');
            const modal = document.getElementById('help-modal');
            logMessage('Modal found: ' + !!modal);
            if (modal) {
                logMessage('Adding show class...');
                modal.classList.add('show');
                modal.setAttribute('aria-hidden', 'false');
                logMessage('Modal classes: ' + modal.className);
            }
        }
        
        function testModalHide() {
            logMessage('=== Testing Modal Hide ===');
            const modal = document.getElementById('help-modal');
            if (modal) {
                logMessage('Removing show class...');
                modal.classList.remove('show');
                modal.setAttribute('aria-hidden', 'true');
                logMessage('Modal classes: ' + modal.className);
            }
        }
        
        // Test basic event listener
        document.addEventListener('DOMContentLoaded', function() {
            logMessage('DOM loaded');
            
            const helpButton = document.getElementById('help-button');
            const helpModal = document.getElementById('help-modal');
            const helpClose = document.getElementById('help-close');
            const modalOverlay = document.querySelector('.modal-overlay');
            
            logMessage('Help button: ' + !!helpButton);
            logMessage('Help modal: ' + !!helpModal);
            logMessage('Help close: ' + !!helpClose);
            logMessage('Modal overlay: ' + !!modalOverlay);
            
            if (helpButton) {
                logMessage('Adding click listener to help button...');
                helpButton.addEventListener('click', function(e) {
                    logMessage('Help button clicked!');
                    logMessage('Event target: ' + e.target.tagName);
                    
                    if (helpModal) {
                        logMessage('Showing modal...');
                        helpModal.classList.add('show');
                        helpModal.setAttribute('aria-hidden', 'false');
                        logMessage('Modal shown, classes: ' + helpModal.className);
                    } else {
                        logMessage('Modal not found!');
                    }
                });
                logMessage('Click listener added');
            }
            
            if (helpClose) {
                helpClose.addEventListener('click', function() {
                    logMessage('Close button clicked');
                    if (helpModal) {
                        helpModal.classList.remove('show');
                        helpModal.setAttribute('aria-hidden', 'true');
                    }
                });
            }
            
            if (modalOverlay) {
                modalOverlay.addEventListener('click', function() {
                    logMessage('Overlay clicked');
                    if (helpModal) {
                        helpModal.classList.remove('show');
                        helpModal.setAttribute('aria-hidden', 'true');
                    }
                });
            }
        });
    </script>
</body>
</html>